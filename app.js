!function o(u,a,s){function c(t,e){if(!a[t]){if(!u[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(f)return f(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=a[t]={exports:{}};u[t][0].call(i.exports,function(e){return c(u[t][1][e]||e)},i,i.exports,o,u,a,s)}return a[t].exports}for(var f="function"==typeof require&&require,e=0;e<s.length;e++)c(s[e]);return c}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RandomBuff=function(e,t,n,r,i){var o=u[~~(3*Math.random())];return new o.constructor(e,t,n,r,i,o.selector)};var r=e("./sword"),i=e("./shield"),o=e("./shoes"),u=[{selector:".sword",constructor:r.Sword},{selector:".shield",constructor:i.Shield},{selector:".shoes",constructor:o.Shoes}]},{"./shield":3,"./shoes":4,"./sword":5}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();n.BuffItem=function(){function u(e,t,n,r,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.ctx=e,this.width=t,this.height=n,this.x=r,this.y=i,this.sprite={x:0,y:0,width:16,height:16},this.image=document.querySelector(o)}return r(u,[{key:"draw",value:function(e){var t=this.image,n=this.sprite,r=this.x,i=this.y,o=this.width,u=this.height;return e.drawImage(t,n.x,n.y,n.width,n.height,r,i,o,u),this}}]),u}()},{}],3:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Shield=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("./buff-item");n.Shield=function(e){function u(e,t,n,r,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,t,n,r,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,i.BuffItem),r(u,[{key:"activateBuff",value:function(e,t){e.hero.isImmortal=!0,setTimeout(function(){return e.hero.isImmortal=!1},t)}}]),u}()},{"./buff-item":2}],4:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Shoes=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("./buff-item");function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}n.Shoes=function(e){function u(e,t,n,r,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,t,n,r,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,i.BuffItem),r(u,[{key:"activateBuff",value:function(e,t){e.hero.speed*=2;var n=[].concat(o(e.smartEnemies),o(e.dummyEnemies));n.forEach(function(e){return e.speed/=2}),setTimeout(function(){e.hero.speed/=2,n.forEach(function(e){return e.speed*=2})},t)}}]),u}()},{"./buff-item":2}],5:[function(e,t,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Sword=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("./buff-item"),o=e("../creatures/bullet");n.Sword=function(e){function u(e,t,n,r,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,t,n,r,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,i.BuffItem),r(u,[{key:"activateBuff",value:function(e,t){(0,o.growBullet)(),setTimeout(function(){return(0,o.shrinkBullet)()},t)}}]),u}()},{"../creatures/bullet":7,"./buff-item":2}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.addHeroControls=function(e,t){i=e,o=i.dir,u=void 0,document.addEventListener("keydown",function(e){var t,n,r;switch(t=u,n=e.keyCode,r=i,u=t!==n?(r.makeHeroSpeedParamsDefault(),r.setNewSpeedTimer(),n):t,e.keyCode){case 38:i.updateSpriteDirection("top"),o.y=-1,o.x=0;break;case 39:i.updateSpriteDirection("right"),o.y=0,o.x=1;break;case 40:i.updateSpriteDirection("bottom"),o.y=1,o.x=0;break;case 37:i.updateSpriteDirection("left"),o.x=-1,o.y=0;break;case 17:o.x=0,o.y=0}}),n=t,r.addEventListener("click",function(e){n(e.offsetX,e.offsetY)});var n;var i,o,u},n.moveToAnotherSideIfGoBeyonceCanvas=function(e,t){var n=e.canvas.clientWidth,r=e.canvas.clientHeight;t.x>n?t.x=0:t.x<0&&(t.x=n);t.y>r?t.y=0:t.y<0&&(t.y=r)};var r=document.querySelector("canvas")},{}],7:[function(e,t,n){"use strict";var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Bullet=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();n.growBullet=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:2;h*=e},n.shrinkBullet=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:2;h/=e};var i=e("./unit");var h=6;n.Bullet=function(e){function f(e,t,n,r,i){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:h,u=6<arguments.length&&void 0!==arguments[6]?arguments[6]:h,a=7<arguments.length&&void 0!==arguments[7]?arguments[7]:10,s=8<arguments.length&&void 0!==arguments[8]?arguments[8]:"black";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,e,o,u,t-h/2,n-h/2,r,i,a));return c.color=s,c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,i.Unit),r(f,[{key:"newPos",value:function(){return this.x+=this.speed*this.dir.x,this.y+=this.speed*this.dir.y,this}},{key:"update",value:function(e){return e.beginPath(),e.fillStyle=this.color,e.arc(this.x,this.y,h,0,2*Math.PI,!0),e.fill(),this}}]),f}()},{"./unit":11}],8:[function(e,t,n){"use strict";var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.DummyEnemy=n.BASE_DUMMY_SIZE=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("./unit");n.BASE_DUMMY_SIZE=25;var u=document.querySelector(".dummy-enemy-sprite"),o=3,a=1,s=0,l=2;n.DummyEnemy=function(e){function c(e,t,n,r,i,o,u){var a=7<arguments.length&&void 0!==arguments[7]?arguments[7]:2;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":f(t))&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e,t,n,r,i,o,u,a));return s.sprite={baseX:0,baseY:0,x:0,y:16*s.getSpriteLayerValue(s.dir.x,s.dir.y),width:16,height:16,deltaX:16,deltaY:16},setInterval(function(){s.sprite.x<16?s.sprite.x+=s.sprite.deltaX:s.sprite.x=s.sprite.baseX},200),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":f(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,i.Unit),r(c,[{key:"update",value:function(e){var t=this.sprite,n=this.x,r=this.y,i=this.width,o=this.height;return e.drawImage(u,t.x,t.y,t.width,t.height,n,r,i,o),this}},{key:"getSpriteLayerValue",value:function(e,t){return Math.abs(e)>Math.abs(t)?0<e?s:a:0<t?l:o}}]),c}()},{"./unit":11}],9:[function(e,t,n){"use strict";var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.Hero=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("./unit");var o={top:2,left:3,right:0,bottom:1},u=document.querySelector(".hero-sprite"),a=document.querySelector(".speed");n.Hero=function(e){function c(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:30,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:50,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:50,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:50,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,u=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,a=7<arguments.length&&void 0!==arguments[7]?arguments[7]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":f(t))&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e,t,n,r,i,o,u,a));return s.gunDir={x:1,y:0},s.isImmortal=!1,s.accelerationStartTime=0,s.currentAccelerationTimer="",s.sprite={baseX:9,baseY:2,x:9,y:2,width:16,height:26,deltaX:32,deltaY:32},setInterval(function(){s.sprite.y<96?s.sprite.y+=s.sprite.deltaY:s.sprite.y=s.sprite.baseY},200),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":f(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,i.Unit),r(c,[{key:"update",value:function(e){a.innerHTML=~~(100*this.speed)/100;var t=this.sprite,n=this.x,r=this.y,i=this.width,o=this.height;return e.drawImage(u,t.x,t.y,t.width,t.height,n,r,i,o),this}},{key:"updateSpriteDirection",value:function(e){this.sprite.x=this.sprite.baseX+o[e]*this.sprite.deltaX}},{key:"makeHeroSpeedParamsDefault",value:function(){this.currentAccelerationTimer&&clearInterval(this.currentAccelerationTimer),this.speed=1,this.accelerationStartTime=0}},{key:"setNewSpeedTimer",value:function(){var e=this,t=this.speed;this.accelerationStartTime=0,this.currentAccelerationTimer=setInterval(function(){e.accelerationStartTime+=50,e.speed=t+5e-4*e.accelerationStartTime,3e3<=e.accelerationStartTime&&clearInterval(e.currentAccelerationTimer)},50)}}]),c}()},{"./unit":11}],10:[function(e,t,n){"use strict";var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(n,"__esModule",{value:!0}),n.SmartEnemy=n.BASE_SMART_SIZE=void 0;var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("./unit"),s=e("../utils");n.BASE_SMART_SIZE=16;var u=document.querySelector(".smart-enemy-sprite"),o=10,l=5,h="13px Arial";n.SmartEnemy=function(e){function c(e,t,n,r,i,o,u){var a=7<arguments.length&&void 0!==arguments[7]?arguments[7]:.6;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":f(t))&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e,t,n,r,i,o,u,a));return s.sprite={baseX:0,baseY:0,x:0,y:0,width:16,height:16,deltaX:16,deltaY:16},setInterval(function(){s.sprite.x<48?s.sprite.x+=s.sprite.deltaX:s.sprite.x=s.sprite.baseX},200),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":f(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,i.Unit),r(c,[{key:"newPos",value:function(e){return this.updateDirection(e),function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var u=i.get;return void 0!==u?u.call(r):void 0}(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"newPos",this).call(this),this}},{key:"update",value:function(e){var t=this.sprite,n=this.x,r=this.y,i=this.width,o=this.height;return e.drawImage(u,t.x,t.y,t.width,t.height,n,r,i,o),this}},{key:"showWarningMessage",value:function(e){this.ctx.font=h,this.ctx.strokeText(e,this.x+o,this.y-l)}},{key:"updateDirection",value:function(e){var t=this.getFearParams(e.isImmortal);if(!(0,s.isDistanceBetweenUnitsMoreThanSafe)(e,this,t.distance)){var n=(0,s.getCenterCoordinates)(e),r=a(n,2),i=r[0],o=r[1],u=Math.atan2(i-this.x-this.width/2,o-this.y-this.height/2)+Math.PI;this.dir.y=t.coefficient*Math.cos(u),this.dir.x=t.coefficient*Math.sin(u),this.showWarningMessage(t.message)}}},{key:"getFearParams",value:function(e){return e?{distance:300,coefficient:1,message:"You don't catch me!"}:{distance:200,coefficient:-1,message:"I see you"}}}]),c}()},{"../utils":14,"./unit":11}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Unit=void 0;var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("../controls");n.Unit=function(){function s(e,t,n,r,i,o,u,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.ctx=e,this.width=t,this.height=n,this.speed=a,this.x=r,this.y=i,this.dir={x:o,y:u}}return r(s,[{key:"newPos",value:function(){return this.x+=this.speed*this.dir.x,this.y+=this.speed*this.dir.y,(0,i.moveToAnotherSideIfGoBeyonceCanvas)(this.ctx,this),this}}]),s}()},{"../controls":6}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Game=void 0;var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("./creatures/hero"),o=e("./creatures/dummyEnemy"),u=e("./creatures/smartEnemy"),a=e("./controls"),c=e("./utils"),f=e("./creatures/bullet"),l=(e("./buffs/buff-item"),e("./buffs/buff-generator"));function h(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var y=document.querySelector(".score");n.Game=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.startTime=Date.now(),this.currentTime=Date.now(),this.canvas.width=700,this.canvas.height=700,this.ctx=this.canvas.getContext("2d"),this.hero=new i.Hero(this.ctx),this.dummyEnemies=[],this.smartEnemies=[],this.heroBullets=[],this.timers=[],this.buffItem=""}return r(t,[{key:"start",value:function(){var n=this,e=setInterval(function(){return n.updateGame()},10),t=setInterval(function(){return n.addEnemy(n.dummyEnemies,o.DummyEnemy,o.BASE_DUMMY_SIZE)},4e3),r=setInterval(function(){return n.addEnemy(n.smartEnemies,u.SmartEnemy,u.BASE_SMART_SIZE)},2e3),i=setInterval(function(){return n.addBuffItem()},12e3);this.timers.push(e,t,r,i),(0,a.addHeroControls)(this.hero,function(e,t){return n.addBullet(e,t)})}},{key:"updateGame",value:function(){this.updateScore(),this.updateCanvasState()}},{key:"updateScore",value:function(){this.currentTime=this.currentTime+10;var e=(this.currentTime-this.startTime)/1e3;y.innerHTML=e}},{key:"updateCanvasState",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.clientWidth,this.ctx.canvas.clientHeight),this.buffItem&&this.buffItem.draw(this.ctx),this.handleHeroPosition(),this.handleDummyEnemiesPosition(),this.handleSmartEnemiesPosition(),this.handleHeroBulletsPosition(),this.handleEnemiesDeath(),this.handleHeroDeath(),this.handleBuffs()}},{key:"handleHeroPosition",value:function(){this.hero.newPos().update(this.ctx)}},{key:"handleDummyEnemiesPosition",value:function(){var t=this;this.dummyEnemies.forEach(function(e){return e.newPos().update(t.ctx)})}},{key:"handleSmartEnemiesPosition",value:function(){var r=this;this.smartEnemies=this.smartEnemies.reduce(function(e,t){if(e.some(function(e){return(0,c.ifUnitsTouchEachOther)(e,t)}))return e;var n=r.smartEnemies.find(function(e){return(0,c.ifUnitsTouchEachOther)(e,t)&&e!==t});return n&&(t=(0,c.mergeUnits)(t,n)),e.push(t),e},[]),this.smartEnemies.forEach(function(e){return e.newPos(r.hero).update(r.ctx)})}},{key:"handleHeroBulletsPosition",value:function(){var t=this,n=this.ctx.canvas.clientWidth,r=this.ctx.canvas.clientHeight,i=void 0;this.heroBullets=this.heroBullets.filter(function(e){return(i=e.x<n&&0<e.x&&e.y<r&&0<e.y)&&e.newPos().update(t.ctx),i})}},{key:"handleEnemiesDeath",value:function(){var n=this,e=[],r=[],i=[],o=[].concat(h(this.smartEnemies),h(this.dummyEnemies));this.smartEnemies.forEach(function(t){n.heroBullets.some(function(e){return n.shouldEnemyDieIfBulletHitsHim(t,e)})||e.push(t)}),this.dummyEnemies.forEach(function(t){n.heroBullets.some(function(e){return n.shouldEnemyDieIfBulletHitsHim(t,e)})||r.push(t)}),this.heroBullets.forEach(function(t){o.some(function(e){return n.shouldEnemyDieIfBulletHitsHim(e,t)})||i.push(t)}),this.smartEnemies=e,this.dummyEnemies=r,this.heroBullets=i}},{key:"handleHeroDeath",value:function(){var t=this;if(!this.hero.isImmortal){[].concat(h(this.dummyEnemies),h(this.smartEnemies)).some(function(e){return(0,c.ifUnitsTouchEachOther)(t.hero,e,5)})&&setTimeout(function(){t.timers.map(function(e){return clearInterval(e)}),alert("You lose")},5)}}},{key:"handleBuffs",value:function(){if((0,c.ifUnitsTouchEachOther)(this.hero,this.buffItem)){this.buffItem.activateBuff(this,2e4),this.buffItem=""}}},{key:"shouldEnemyDieIfBulletHitsHim",value:function(e,t){var n=(0,c.ifUnitsTouchEachOther)(e,t);return n&&(e=this.damageUnit(e)),!(!n||!(e.width<25||e.height<25))}},{key:"damageUnit",value:function(e){var t=e.width*e.height,n=(t-20)/t;return e.width*=n,e.height*=n,.15<e.speed&&(e.speed-=.15),e}},{key:"addEnemy",value:function(e,t,n){var r=this.generateRandomPositionAndDirection(this.hero,n),i=r.size,o=r.x,u=r.y,a=r.alfaX,s=r.alfaY,c=new t(this.ctx,i,i,o,u,a,s);e.push(c)}},{key:"addBullet",value:function(e,t){var n=(0,c.getCenterCoordinates)(this.hero),r=s(n,2),i=r[0],o=r[1],u=Math.atan2(i-e,o-t)+Math.PI,a=new f.Bullet(this.ctx,i,o,Math.sin(u),Math.cos(u));this.heroBullets.push(a)}},{key:"addBuffItem",value:function(){var e=this.generateRandomPositionAndDirection(this.hero,0),t=e.x,n=e.y,r=new l.RandomBuff(this.ctx,20,20,t,n);this.buffItem=r}},{key:"generateRandomPositionAndDirection",value:function(e,t){for(var n=void 0,r=void 0,i=20*Math.random()+t;n=Math.random()*this.ctx.canvas.clientWidth,r=Math.random()*this.ctx.canvas.clientHeight,!(0,c.isDistanceBetweenUnitsMoreThanSafe)(e,{x:n,y:r,width:i,height:i}););return{x:n,y:r,alfaX:2*Math.random()-1,alfaY:2*Math.random()-1,size:i}}}]),t}()},{"./buffs/buff-generator":1,"./buffs/buff-item":2,"./controls":6,"./creatures/bullet":7,"./creatures/dummyEnemy":8,"./creatures/hero":9,"./creatures/smartEnemy":10,"./utils":14}],13:[function(e,t,n){"use strict";var r,i=e("./game-arena");r=document.querySelector("canvas"),new i.Game(r).start()},{"./game-arena":12}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function h(e){return[e.x+.5*e.width,e.y+.5*e.height]}function r(e,t){var n=h(e),r=l(n,2),i=r[0],o=r[1],u=h(t),a=l(u,2),s=a[0],c=a[1];return Math.pow(Math.pow(i-s,2)+Math.pow(o-c,2),.5)}n.getCenterCoordinates=h,n.getDistanceBetweenUnits=r,n.ifUnitsTouchEachOther=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=h(e),i=l(r,2),o=i[0],u=i[1],a=h(t),s=l(a,2),c=s[0],f=s[1];return Math.abs(c-o)<(e.width+t.width-y-n)/2&&Math.abs(f-u)<(e.height+t.height-y-n)/2},n.isDistanceBetweenUnitsMoreThanSafe=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:i;return r(e,t)>n},n.mergeUnits=function(e,t){var n=e.width*e.height,r=t.width*t.height,i=Math.pow((n+r)/n,.5);return e.width*=i,e.height*=i,e};var y=2;var i=200},{}]},{},[13]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJmcm9udGVuZC9qcy9idWZmcy9idWZmLWdlbmVyYXRvci5qcyIsImZyb250ZW5kL2pzL2J1ZmZzL2J1ZmYtaXRlbS5qcyIsImZyb250ZW5kL2pzL2J1ZmZzL3NoaWVsZC5qcyIsImZyb250ZW5kL2pzL2J1ZmZzL3Nob2VzLmpzIiwiZnJvbnRlbmQvanMvYnVmZnMvc3dvcmQuanMiLCJmcm9udGVuZC9qcy9jb250cm9scy5qcyIsImZyb250ZW5kL2pzL2NyZWF0dXJlcy9idWxsZXQuanMiLCJmcm9udGVuZC9qcy9jcmVhdHVyZXMvZHVtbXlFbmVteS5qcyIsImZyb250ZW5kL2pzL2NyZWF0dXJlcy9oZXJvLmpzIiwiZnJvbnRlbmQvanMvY3JlYXR1cmVzL3NtYXJ0RW5lbXkuanMiLCJmcm9udGVuZC9qcy9jcmVhdHVyZXMvdW5pdC5qcyIsImZyb250ZW5kL2pzL2dhbWUtYXJlbmEuanMiLCJmcm9udGVuZC9qcy9tYWluLmpzIiwiZnJvbnRlbmQvanMvdXRpbHMuanMiXSwibmFtZXMiOlsiciIsImUiLCJuIiwidCIsIm8iLCJpIiwiZiIsImMiLCJyZXF1aXJlIiwidSIsImEiLCJFcnJvciIsImNvZGUiLCJwIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiUmFuZG9tQnVmZiIsImN0eCIsIndpZHRoIiwiaGVpZ2h0IiwieCIsInkiLCJidWZmVHlwZSIsImJ1ZmZUeXBlcyIsIk1hdGgiLCJyYW5kb20iLCJjb25zdHJ1Y3RvciIsInNlbGVjdG9yIiwiX3N3b3JkIiwiX3NoaWVsZCIsIl9zaG9lcyIsIlN3b3JkIiwiU2hpZWxkIiwiU2hvZXMiLCJCdWZmSXRlbSIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJzcHJpdGUiLCJpbWFnZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImRyYXdJbWFnZSIsIl9idWZmSXRlbSIsInR5cGUiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIl9fcHJvdG9fXyIsIk9iamVjdCIsImdldFByb3RvdHlwZU9mIiwiZ2FtZU9iamVjdCIsInRpbWUiLCJoZXJvIiwiaXNJbW1vcnRhbCIsInNldFRpbWVvdXQiLCJzcGVlZCIsImVuZW1pZXMiLCJjb25jYXQiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJzbWFydEVuZW1pZXMiLCJkdW1teUVuZW1pZXMiLCJmb3JFYWNoIiwiZW5lbXkiLCJfYnVsbGV0IiwiZ3Jvd0J1bGxldCIsInNocmlua0J1bGxldCIsImFkZEhlcm9Db250cm9scyIsImNyZWF0ZUJ1bGxldCIsImRpciIsInByZXZpb3VzS2V5Q29kZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsIm5ld0tleUNvZGUiLCJrZXlDb2RlIiwibWFrZUhlcm9TcGVlZFBhcmFtc0RlZmF1bHQiLCJzZXROZXdTcGVlZFRpbWVyIiwidXBkYXRlU3ByaXRlRGlyZWN0aW9uIiwiY2FudmFzIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJtb3ZlVG9Bbm90aGVyU2lkZUlmR29CZXlvbmNlQ2FudmFzIiwidW5pdCIsIkZJRUxEX1dJRFRIIiwiY2xpZW50V2lkdGgiLCJGSUVMRF9IRUlHSFQiLCJjbGllbnRIZWlnaHQiLCJwYXJhbSIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsIkJVTExFVF9TSVpFIiwiX3VuaXQiLCJCdWxsZXQiLCJhbGZhWCIsImFsZmFZIiwiY29sb3IiLCJfdGhpcyIsIlVuaXQiLCJiZWdpblBhdGgiLCJmaWxsU3R5bGUiLCJhcmMiLCJQSSIsImZpbGwiLCJCQVNFX0RVTU1ZX1NJWkUiLCJpbWciLCJTUFJJVEVfTEFZRVIiLCJEdW1teUVuZW15IiwiYmFzZVgiLCJiYXNlWSIsImdldFNwcml0ZUxheWVyVmFsdWUiLCJkZWx0YVgiLCJkZWx0YVkiLCJzZXRJbnRlcnZhbCIsImFicyIsInRvcCIsImxlZnQiLCJyaWdodCIsImJvdHRvbSIsInNwZWVkU3BhbiIsIkhlcm8iLCJndW5EaXIiLCJhY2NlbGVyYXRpb25TdGFydFRpbWUiLCJjdXJyZW50QWNjZWxlcmF0aW9uVGltZXIiLCJpbm5lckhUTUwiLCJkaXJlY3Rpb24iLCJjbGVhckludGVydmFsIiwiX3RoaXMyIiwic3RhcnRTcGVlZCIsIl91dGlscyIsIkJBU0VfU01BUlRfU0laRSIsIk1FU1NBR0UiLCJTbWFydEVuZW15IiwidXBkYXRlRGlyZWN0aW9uIiwiX2dldCIsInByb3RvdHlwZSIsInRleHQiLCJmb250Iiwic3Ryb2tlVGV4dCIsImZlYXJQYXJhbXMiLCJnZXRGZWFyUGFyYW1zIiwiaXNEaXN0YW5jZUJldHdlZW5Vbml0c01vcmVUaGFuU2FmZSIsImRpc3RhbmNlIiwiX2dldENlbnRlckNvb3JkaW5hdGVzIiwiZ2V0Q2VudGVyQ29vcmRpbmF0ZXMiLCJfZ2V0Q2VudGVyQ29vcmRpbmF0ZXMyIiwiX3NsaWNlZFRvQXJyYXkiLCJoZXJvWCIsImhlcm9ZIiwiYW5nbGUiLCJhdGFuMiIsImNvZWZmaWNpZW50IiwiY29zIiwic2luIiwic2hvd1dhcm5pbmdNZXNzYWdlIiwibWVzc2FnZSIsImlzRmVhciIsIl9jb250cm9scyIsIl9oZXJvIiwiX2R1bW15RW5lbXkiLCJfc21hcnRFbmVteSIsIl9idWZmR2VuZXJhdG9yIiwic2NvcmUiLCJHYW1lIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsImN1cnJlbnRUaW1lIiwiZ2V0Q29udGV4dCIsImhlcm9CdWxsZXRzIiwidGltZXJzIiwiYnVmZkl0ZW0iLCJ0aW1lcjEiLCJ1cGRhdGVHYW1lIiwidGltZXIyIiwiYWRkRW5lbXkiLCJ0aW1lcjMiLCJ0aW1lcjQiLCJhZGRCdWZmSXRlbSIsInB1c2giLCJhZGRCdWxsZXQiLCJ1cGRhdGVTY29yZSIsInVwZGF0ZUNhbnZhc1N0YXRlIiwidmFsdWUiLCJjbGVhclJlY3QiLCJkcmF3IiwiaGFuZGxlSGVyb1Bvc2l0aW9uIiwiaGFuZGxlRHVtbXlFbmVtaWVzUG9zaXRpb24iLCJoYW5kbGVTbWFydEVuZW1pZXNQb3NpdGlvbiIsImhhbmRsZUhlcm9CdWxsZXRzUG9zaXRpb24iLCJoYW5kbGVFbmVtaWVzRGVhdGgiLCJoYW5kbGVIZXJvRGVhdGgiLCJoYW5kbGVCdWZmcyIsIm5ld1BvcyIsInVwZGF0ZSIsIl90aGlzMyIsInJlZHVjZSIsIm5ld0FycmF5IiwiY3VycmVudEVuZW15Iiwic29tZSIsImlmVW5pdHNUb3VjaEVhY2hPdGhlciIsInNlY29uZEVuZW15IiwiZmluZCIsIm1lcmdlVW5pdHMiLCJfdGhpczQiLCJpc0luc2lkZUNhbnZhcyIsImZpbHRlciIsImJ1bGxldCIsIl90aGlzNSIsIm5ld1NtYXJ0RW5lbWllcyIsIm5ld0R1bW15RW5lbWllcyIsIm5ld0J1bGxldHMiLCJhbGxFbmVtaWVzIiwic2hvdWxkRW5lbXlEaWVJZkJ1bGxldEhpdHNIaW0iLCJfdGhpczYiLCJtYXAiLCJ0aW1lciIsImFsZXJ0IiwiYWN0aXZhdGVCdWZmIiwiaXNDb250YWN0IiwiZGFtYWdlVW5pdCIsInMiLCJrIiwiZW5lbXlBcnJheSIsImNyZWF0dXJlQ29uc3RydWN0b3IiLCJiYXNlU2l6ZSIsIl9nZW5lcmF0ZVJhbmRvbVBvc2l0aSIsImdlbmVyYXRlUmFuZG9tUG9zaXRpb25BbmREaXJlY3Rpb24iLCJzaXplIiwiX2dlbmVyYXRlUmFuZG9tUG9zaXRpMiIsIl9nYW1lQXJlbmEiLCJzdGFydCIsImdldERpc3RhbmNlQmV0d2VlblVuaXRzIiwidW5pdDEiLCJ1bml0MiIsIngxIiwieTEiLCJfZ2V0Q2VudGVyQ29vcmRpbmF0ZXMzIiwiX2dldENlbnRlckNvb3JkaW5hdGVzNCIsIngyIiwieTIiLCJwb3ciLCJkZWx0YSIsIl9nZXRDZW50ZXJDb29yZGluYXRlczUiLCJfZ2V0Q2VudGVyQ29vcmRpbmF0ZXM2IiwiX2dldENlbnRlckNvb3JkaW5hdGVzNyIsIl9nZXRDZW50ZXJDb29yZGluYXRlczgiLCJQSVhFTF9CT1JERVIiLCJkaXN0IiwiU0FGRV9ESVNUQU5DRSIsInMxIiwiczIiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsU0FBQUMsRUFBQUMsRUFB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aUMsRUFBQUMsR0FBd0QsSUFBWFEsRUFBVyxFQUFBekosVUFBQXhFLGFBQUF5RSxJQUFBRCxVQUFBLEdBQUFBLFVBQUEsR0FBSCxFQUFHMEosRUFDNUNuRyxFQUQ0Q3lGLEdBQUFXLEVBQUFsRyxFQUFBaUcsRUFBQSxHQUFBUixFQUFBUyxFQUFBLEdBQUFSLEVBQUFRLEVBQUEsR0FBQUMsRUFFNUNyRyxFQUY0QzBGLEdBQUFZLEVBQUFwRyxFQUFBbUcsRUFBQSxHQUFBTixFQUFBTyxFQUFBLEdBQUFOLEVBQUFNLEVBQUEsR0FHN0QsT0FDRTFOLEtBQUFzRixJQUFTNkgsRUFBVEosSUFBcUJGLEVBQUFuTixNQUFjb04sRUFBZHBOLE1BQUFpTyxFQUFETCxHQUFwQixHQUNHdE4sS0FBQXNGLElBQVM4SCxFQUFUSixJQUFxQkgsRUFBQWxOLE9BQWVtTixFQUFmbk4sT0FBQWdPLEVBQURMLEdBRnpCLEtBUWNyRyxtQ0FBVCxTQUFBNEYsRUFBQUMsR0FBZ0YsSUFBdEJjLEVBQXNCLEVBQUEvSixVQUFBeEUsYUFBQXlFLElBQUFELFVBQUEsR0FBQUEsVUFBQSxHQUFmZ0ssRUFDdEUsT0FBT2pCLEVBQUFDLEVBQUFDLEdBQVBjLEtBR2M3QyxXQUFULFNBQUE4QixFQUFBQyxHQUNMLElBQU1nQixFQUFLakIsRUFBQW5OLE1BQWNtTixFQUF6QmxOLE9BQ01vTyxFQUFLakIsRUFBQXBOLE1BQWNvTixFQUF6Qm5OLE9BQ011TSxFQUFJbE0sS0FBQXFOLEtBQVVTLEVBQURDLEdBQVRELEVBQVYsSUFHQSxPQUZBakIsRUFBQW5OLE9BQUF3TSxFQUNBVyxFQUFBbE4sUUFBQXVNLEVBQ0FXLEdBdEJGLElBQU1jLEVBQU4sRUFVQSxJQUFNRSxFQUFOIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgeyBTd29yZCB9IGZyb20gJy4vc3dvcmQnO1xyXG5pbXBvcnQgeyBTaGllbGQgfSBmcm9tICcuL3NoaWVsZCc7XHJcbmltcG9ydCB7IFNob2VzIH0gZnJvbSAnLi9zaG9lcyc7XHJcblxyXG5jb25zdCBidWZmVHlwZXMgPSBbe1xyXG4gIHNlbGVjdG9yOiAnLnN3b3JkJyxcclxuICBjb25zdHJ1Y3RvcjogU3dvcmQsXHJcbn0sIHtcclxuICBzZWxlY3RvcjogJy5zaGllbGQnLFxyXG4gIGNvbnN0cnVjdG9yOiBTaGllbGQsXHJcbn0sIHtcclxuICBzZWxlY3RvcjogJy5zaG9lcycsXHJcbiAgY29uc3RydWN0b3I6IFNob2VzLFxyXG59XVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFJhbmRvbUJ1ZmYoY3R4LCB3aWR0aCwgaGVpZ2h0LCB4LCB5KSB7XHJcbiAgY29uc3QgYnVmZlR5cGUgPSBidWZmVHlwZXNbfn4oTWF0aC5yYW5kb20oKSAqIDMpXVxyXG4gIGNvbnN0IGJ1ZmYgPSBidWZmVHlwZS5jb25zdHJ1Y3RvclxyXG4gIHJldHVybiBuZXcgYnVmZihjdHgsIHdpZHRoLCBoZWlnaHQsIHgsIHksIGJ1ZmZUeXBlLnNlbGVjdG9yKTtcclxufTsiLCJcclxuZXhwb3J0IGNsYXNzIEJ1ZmZJdGVtIHtcclxuICBjb25zdHJ1Y3RvcihjdHgsIHdpZHRoLCBoZWlnaHQsIHgsIHksIHNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLmN0eCA9IGN0eDtcclxuICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLnNwcml0ZSA9IHtcclxuICAgICAgeDogMCxcclxuICAgICAgeTogMCxcclxuICAgICAgd2lkdGg6IDE2LFxyXG4gICAgICBoZWlnaHQ6IDE2LFxyXG4gICAgfVxyXG4gICAgdGhpcy5pbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZHJhdyhjdHgpIHtcclxuICAgIGNvbnN0IHsgaW1hZ2UsIHNwcml0ZSwgeCwgeSwgd2lkdGgsIGhlaWdodCB9ID0gdGhpc1xyXG4gICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgc3ByaXRlLngsIHNwcml0ZS55LCBzcHJpdGUud2lkdGgsIHNwcml0ZS5oZWlnaHQsIHgsIHksIHdpZHRoLCBoZWlnaHQpXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQnVmZkl0ZW0gfSBmcm9tICcuL2J1ZmYtaXRlbSc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2hpZWxkIGV4dGVuZHMgQnVmZkl0ZW0ge1xyXG4gIGNvbnN0cnVjdG9yKGN0eCwgd2lkdGgsIGhlaWdodCwgeCwgeSwgdHlwZSkge1xyXG4gICAgc3VwZXIoY3R4LCB3aWR0aCwgaGVpZ2h0LCB4LCB5LCB0eXBlKTtcclxuICB9XHJcblxyXG4gIGFjdGl2YXRlQnVmZihnYW1lT2JqZWN0LCB0aW1lKSB7XHJcbiAgICBnYW1lT2JqZWN0Lmhlcm8uaXNJbW1vcnRhbCA9IHRydWU7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IGdhbWVPYmplY3QuaGVyby5pc0ltbW9ydGFsID0gZmFsc2UsIHRpbWUpXHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgQnVmZkl0ZW0gfSBmcm9tICcuL2J1ZmYtaXRlbSc7XHJcblxyXG5leHBvcnQgY2xhc3MgU2hvZXMgZXh0ZW5kcyBCdWZmSXRlbSB7XHJcbiAgY29uc3RydWN0b3IoY3R4LCB3aWR0aCwgaGVpZ2h0LCB4LCB5LCB0eXBlKSB7XHJcbiAgICBzdXBlcihjdHgsIHdpZHRoLCBoZWlnaHQsIHgsIHksIHR5cGUpO1xyXG4gIH1cclxuXHJcbiAgYWN0aXZhdGVCdWZmKGdhbWVPYmplY3QsIHRpbWUpIHtcclxuICAgIGNvbnN0IHZhbHVlID0gMjtcclxuICAgIGdhbWVPYmplY3QuaGVyby5zcGVlZCAqPSB2YWx1ZTtcclxuICAgIGNvbnN0IGVuZW1pZXMgPSBbLi4uZ2FtZU9iamVjdC5zbWFydEVuZW1pZXMsIC4uLmdhbWVPYmplY3QuZHVtbXlFbmVtaWVzXTtcclxuICAgIGVuZW1pZXMuZm9yRWFjaChlbmVteSA9PiBlbmVteS5zcGVlZCAvPSB2YWx1ZSk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIGdhbWVPYmplY3QuaGVyby5zcGVlZCAvPSB2YWx1ZTtcclxuICAgICAgZW5lbWllcy5mb3JFYWNoKGVuZW15ID0+IGVuZW15LnNwZWVkICo9IHZhbHVlKTtcclxuICAgIH0sIHRpbWUpXHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgQnVmZkl0ZW0gfSBmcm9tICcuL2J1ZmYtaXRlbSc7XHJcbmltcG9ydCB7IGdyb3dCdWxsZXQsIHNocmlua0J1bGxldCB9IGZyb20gJy4uL2NyZWF0dXJlcy9idWxsZXQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN3b3JkIGV4dGVuZHMgQnVmZkl0ZW0ge1xyXG4gIGNvbnN0cnVjdG9yKGN0eCwgd2lkdGgsIGhlaWdodCwgeCwgeSwgdHlwZSkge1xyXG4gICAgc3VwZXIoY3R4LCB3aWR0aCwgaGVpZ2h0LCB4LCB5LCB0eXBlKTtcclxuICB9XHJcblxyXG4gIGFjdGl2YXRlQnVmZihnYW1lT2JqZWN0LCB0aW1lKSB7XHJcbiAgICBncm93QnVsbGV0KCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHNocmlua0J1bGxldCgpLCB0aW1lKVxyXG4gIH1cclxuXHJcbn0iLCJjb25zdCBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRIZXJvQ29udHJvbHMoaGVybywgY3JlYXRlQnVsbGV0KSB7XHJcbiAgc3Vic3JpYmVUb01vdmUoaGVybyk7XHJcbiAgc3Vic2NyaWJlVG9TaG9vdChjcmVhdGVCdWxsZXQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJzY3JpYmVUb1Nob290KGNyZWF0ZUJ1bGxldCkge1xyXG4gIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcclxuICAgIGNyZWF0ZUJ1bGxldChldmVudC5vZmZzZXRYLCBldmVudC5vZmZzZXRZKTtcclxuICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJzcmliZVRvTW92ZShoZXJvKSB7XHJcbiAgY29uc3QgeyBkaXIgfSA9IGhlcm87XHJcbiAgbGV0IHByZXZpb3VzS2V5Q29kZTtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBldmVudCA9PiB7XHJcbiAgICBwcmV2aW91c0tleUNvZGUgPSBjaGFuZ2VTcGVlZElmSGVyb0NoYW5nZWREaXJlY3Rpb24ocHJldmlvdXNLZXlDb2RlLCBldmVudC5rZXlDb2RlLCBoZXJvKTtcclxuICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xyXG4gICAgICBjYXNlIDM4OiB7XHJcbiAgICAgICAgaGVyby51cGRhdGVTcHJpdGVEaXJlY3Rpb24oJ3RvcCcpO1xyXG4gICAgICAgIGRpci55ID0gLTE7XHJcbiAgICAgICAgZGlyLnggPSAwO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgMzk6IHtcclxuICAgICAgICBoZXJvLnVwZGF0ZVNwcml0ZURpcmVjdGlvbigncmlnaHQnKTtcclxuICAgICAgICBkaXIueSA9IDA7XHJcbiAgICAgICAgZGlyLnggPSAxO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgNDA6IHtcclxuICAgICAgICBoZXJvLnVwZGF0ZVNwcml0ZURpcmVjdGlvbignYm90dG9tJyk7XHJcbiAgICAgICAgZGlyLnkgPSAxO1xyXG4gICAgICAgIGRpci54ID0gMDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIDM3OiB7XHJcbiAgICAgICAgaGVyby51cGRhdGVTcHJpdGVEaXJlY3Rpb24oJ2xlZnQnKTtcclxuICAgICAgICBkaXIueCA9IC0xO1xyXG4gICAgICAgIGRpci55ID0gMDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIDE3OiB7XHJcbiAgICAgICAgZGlyLnggPSAwO1xyXG4gICAgICAgIGRpci55ID0gMDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VTcGVlZElmSGVyb0NoYW5nZWREaXJlY3Rpb24ocHJldmlvdXNLZXlDb2RlLCBuZXdLZXlDb2RlLCBoZXJvKSB7XHJcbiAgaWYgKHByZXZpb3VzS2V5Q29kZSAhPT0gbmV3S2V5Q29kZSkge1xyXG4gICAgaGVyby5tYWtlSGVyb1NwZWVkUGFyYW1zRGVmYXVsdCgpO1xyXG4gICAgaGVyby5zZXROZXdTcGVlZFRpbWVyKCk7XHJcbiAgICByZXR1cm4gbmV3S2V5Q29kZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHByZXZpb3VzS2V5Q29kZTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtb3ZlVG9Bbm90aGVyU2lkZUlmR29CZXlvbmNlQ2FudmFzKGN0eCwgdW5pdCkge1xyXG4gIGxldCBGSUVMRF9XSURUSCA9IGN0eC5jYW52YXMuY2xpZW50V2lkdGg7XHJcbiAgbGV0IEZJRUxEX0hFSUdIVCA9IGN0eC5jYW52YXMuY2xpZW50SGVpZ2h0O1xyXG5cclxuICBpZiAodW5pdC54ID4gRklFTERfV0lEVEgpIHtcclxuICAgIHVuaXQueCA9IDA7XHJcbiAgfSBlbHNlIGlmICh1bml0LnggPCAwKSB7XHJcbiAgICB1bml0LnggPSBGSUVMRF9XSURUSDtcclxuICB9XHJcbiAgaWYgKHVuaXQueSA+IEZJRUxEX0hFSUdIVCkge1xyXG4gICAgdW5pdC55ID0gMDtcclxuICB9IGVsc2UgaWYgKHVuaXQueSA8IDApIHtcclxuICAgIHVuaXQueSA9IEZJRUxEX0hFSUdIVDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgVW5pdCB9IGZyb20gXCIuL3VuaXRcIjtcclxuXHJcbmNvbnN0IFNQRUVEID0gMTA7XHJcbmNvbnN0IENPTE9SID0gXCJibGFja1wiO1xyXG5sZXQgQlVMTEVUX1NJWkUgPSA2O1xyXG5cclxuZXhwb3J0IGNsYXNzIEJ1bGxldCBleHRlbmRzIFVuaXQge1xyXG4gIGNvbnN0cnVjdG9yKGN0eCwgeCwgeSwgYWxmYVgsIGFsZmFZLCB3aWR0aCA9IEJVTExFVF9TSVpFLCBoZWlnaHQgPSBCVUxMRVRfU0laRSwgc3BlZWQgPSBTUEVFRCwgY29sb3IgPSBDT0xPUikge1xyXG4gICAgc3VwZXIoY3R4LCB3aWR0aCwgaGVpZ2h0LCB4IC0gQlVMTEVUX1NJWkUgLyAyLCB5IC0gQlVMTEVUX1NJWkUgLyAyLCBhbGZhWCwgYWxmYVksIHNwZWVkKTtcclxuICAgIHRoaXMuY29sb3IgPSBjb2xvclxyXG4gIH1cclxuXHJcbiAgbmV3UG9zKCkge1xyXG4gICAgdGhpcy54ICs9IHRoaXMuc3BlZWQgKiB0aGlzLmRpci54O1xyXG4gICAgdGhpcy55ICs9IHRoaXMuc3BlZWQgKiB0aGlzLmRpci55O1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoY3R4KSB7XHJcbiAgICBjdHguYmVnaW5QYXRoKCk7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5jb2xvcjtcclxuICAgIGN0eC5hcmModGhpcy54LCB0aGlzLnksIEJVTExFVF9TSVpFLCAwLCAyICogTWF0aC5QSSwgdHJ1ZSk7XHJcbiAgICBjdHguZmlsbCgpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ3Jvd0J1bGxldChwYXJhbSA9IDIpIHtcclxuICBCVUxMRVRfU0laRSAqPSBwYXJhbTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNocmlua0J1bGxldChwYXJhbSA9IDIpIHtcclxuICBCVUxMRVRfU0laRSAvPSBwYXJhbTtcclxufVxyXG4iLCJpbXBvcnQgeyBVbml0IH0gZnJvbSBcIi4vdW5pdFwiO1xyXG5cclxuY29uc3QgU1BFRUQgPSAyO1xyXG5cclxuZXhwb3J0IGNvbnN0IEJBU0VfRFVNTVlfU0laRSA9IDI1O1xyXG5jb25zdCBpbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHVtbXktZW5lbXktc3ByaXRlJyk7XHJcbmNvbnN0IFNQUklURV9MQVlFUiA9IHtcclxuICB0b3A6IDMsXHJcbiAgbGVmdDogMSxcclxuICByaWdodDogMCxcclxuICBib3R0b206IDJcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIER1bW15RW5lbXkgZXh0ZW5kcyBVbml0IHtcclxuICBjb25zdHJ1Y3RvcihjdHgsIHdpZHRoLCBoZWlnaHQsIHgsIHksIGFsZmFYLCBhbGZhWSwgc3BlZWQgPSBTUEVFRCkge1xyXG4gICAgc3VwZXIoY3R4LCB3aWR0aCwgaGVpZ2h0LCB4LCB5LCBhbGZhWCwgYWxmYVksIHNwZWVkKTtcclxuICAgIHRoaXMuc3ByaXRlID0ge1xyXG4gICAgICBiYXNlWDogMCxcclxuICAgICAgYmFzZVk6IDAsXHJcbiAgICAgIHg6IDAsXHJcbiAgICAgIHk6IHRoaXMuZ2V0U3ByaXRlTGF5ZXJWYWx1ZSh0aGlzLmRpci54LCB0aGlzLmRpci55KSAqIDE2LFxyXG4gICAgICB3aWR0aDogMTYsXHJcbiAgICAgIGhlaWdodDogMTYsXHJcbiAgICAgIGRlbHRhWDogMTYsXHJcbiAgICAgIGRlbHRhWTogMTZcclxuICAgIH1cclxuXHJcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIGlmICh0aGlzLnNwcml0ZS54IDwgMTYpIHtcclxuICAgICAgICB0aGlzLnNwcml0ZS54ICs9IHRoaXMuc3ByaXRlLmRlbHRhWDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNwcml0ZS54ID0gdGhpcy5zcHJpdGUuYmFzZVg7XHJcbiAgICAgIH1cclxuICAgIH0sIDIwMClcclxuICB9XHJcblxyXG4gIHVwZGF0ZShjdHgpIHtcclxuICAgIGNvbnN0IHsgc3ByaXRlLCB4LCB5LCB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzXHJcbiAgICBjdHguZHJhd0ltYWdlKGltZywgc3ByaXRlLngsIHNwcml0ZS55LCBzcHJpdGUud2lkdGgsIHNwcml0ZS5oZWlnaHQsIHgsIHksIHdpZHRoLCBoZWlnaHQpXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIGdldFNwcml0ZUxheWVyVmFsdWUoeCwgeSkge1xyXG4gICAgaWYgKE1hdGguYWJzKHgpID4gTWF0aC5hYnMoeSkpIHtcclxuICAgICAgcmV0dXJuIHggPiAwID8gU1BSSVRFX0xBWUVSLnJpZ2h0IDogU1BSSVRFX0xBWUVSLmxlZnQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4geSA+IDAgPyBTUFJJVEVfTEFZRVIuYm90dG9tIDogU1BSSVRFX0xBWUVSLnRvcDtcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBVbml0IH0gZnJvbSBcIi4vdW5pdFwiO1xyXG5cclxuY29uc3QgU1BFRUQgPSAxO1xyXG5jb25zdCBIRUlHSFQgPSA1MDtcclxuY29uc3QgV0lEVEggPSAzMDtcclxuY29uc3QgQUNDRUxFUkFUSU9OID0gMC4wMDA1O1xyXG5jb25zdCBNQVhfQUNDRUxFUkFUSU9OX1RJTUUgPSAzMDAwO1xyXG5jb25zdCBTUFJJVEVfTEFZRVIgPSB7XHJcbiAgdG9wOiAyLFxyXG4gIGxlZnQ6IDMsXHJcbiAgcmlnaHQ6IDAsXHJcbiAgYm90dG9tOiAxXHJcbn1cclxuXHJcbmNvbnN0IGltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZXJvLXNwcml0ZScpO1xyXG5jb25zdCBzcGVlZFNwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3BlZWQnKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBIZXJvIGV4dGVuZHMgVW5pdCB7XHJcbiAgY29uc3RydWN0b3IoY3R4LCB3aWR0aCA9IFdJRFRILCBoZWlnaHQgPSBIRUlHSFQsIHggPSA1MCwgeSA9IDUwLCBhbGZhWCA9IDAsIGFsZmFZID0gMCwgc3BlZWQgPSBTUEVFRCkge1xyXG4gICAgc3VwZXIoY3R4LCB3aWR0aCwgaGVpZ2h0LCB4LCB5LCBhbGZhWCwgYWxmYVksIHNwZWVkKTtcclxuICAgIHRoaXMuZ3VuRGlyID0ge1xyXG4gICAgICB4OiAxLFxyXG4gICAgICB5OiAwXHJcbiAgICB9O1xyXG4gICAgdGhpcy5pc0ltbW9ydGFsID0gZmFsc2U7XHJcbiAgICB0aGlzLmFjY2VsZXJhdGlvblN0YXJ0VGltZSA9IDA7XHJcbiAgICB0aGlzLmN1cnJlbnRBY2NlbGVyYXRpb25UaW1lciA9ICcnO1xyXG5cclxuICAgIHRoaXMuc3ByaXRlID0ge1xyXG4gICAgICBiYXNlWDogOSxcclxuICAgICAgYmFzZVk6IDIsXHJcbiAgICAgIHg6IDksXHJcbiAgICAgIHk6IDIsXHJcbiAgICAgIHdpZHRoOiAxNixcclxuICAgICAgaGVpZ2h0OiAyNixcclxuICAgICAgZGVsdGFYOiAzMixcclxuICAgICAgZGVsdGFZOiAzMlxyXG4gICAgfVxyXG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5zcHJpdGUueSA8IDk2KSB7XHJcbiAgICAgICAgdGhpcy5zcHJpdGUueSArPSB0aGlzLnNwcml0ZS5kZWx0YVlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNwcml0ZS55ID0gdGhpcy5zcHJpdGUuYmFzZVk7XHJcbiAgICAgIH1cclxuICAgIH0sIDIwMClcclxuICB9XHJcblxyXG4gIHVwZGF0ZShjdHgpIHtcclxuICAgIHNwZWVkU3Bhbi5pbm5lckhUTUwgPSB+fih0aGlzLnNwZWVkICogMTAwKSAvIDEwMDtcclxuICAgIGNvbnN0IHsgc3ByaXRlLCB4LCB5LCB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzXHJcbiAgICBjdHguZHJhd0ltYWdlKGltZywgc3ByaXRlLngsIHNwcml0ZS55LCBzcHJpdGUud2lkdGgsIHNwcml0ZS5oZWlnaHQsIHgsIHksIHdpZHRoLCBoZWlnaHQpXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHVwZGF0ZVNwcml0ZURpcmVjdGlvbihkaXJlY3Rpb24pIHtcclxuICAgIHRoaXMuc3ByaXRlLnggPSB0aGlzLnNwcml0ZS5iYXNlWCArIFNQUklURV9MQVlFUltkaXJlY3Rpb25dICogdGhpcy5zcHJpdGUuZGVsdGFYXHJcbiAgfVxyXG5cclxuICBtYWtlSGVyb1NwZWVkUGFyYW1zRGVmYXVsdCgpIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRBY2NlbGVyYXRpb25UaW1lcikge1xyXG4gICAgICBjbGVhckludGVydmFsKHRoaXMuY3VycmVudEFjY2VsZXJhdGlvblRpbWVyKVxyXG4gICAgfVxyXG4gICAgdGhpcy5zcGVlZCA9IFNQRUVEO1xyXG4gICAgdGhpcy5hY2NlbGVyYXRpb25TdGFydFRpbWUgPSAwO1xyXG4gIH1cclxuXHJcbiAgc2V0TmV3U3BlZWRUaW1lcigpIHtcclxuICAgIGNvbnN0IHN0YXJ0U3BlZWQgPSB0aGlzLnNwZWVkO1xyXG4gICAgdGhpcy5hY2NlbGVyYXRpb25TdGFydFRpbWUgPSAwO1xyXG4gICAgdGhpcy5jdXJyZW50QWNjZWxlcmF0aW9uVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuYWNjZWxlcmF0aW9uU3RhcnRUaW1lICs9IDUwO1xyXG4gICAgICB0aGlzLnNwZWVkID0gc3RhcnRTcGVlZCArIEFDQ0VMRVJBVElPTiAqIHRoaXMuYWNjZWxlcmF0aW9uU3RhcnRUaW1lO1xyXG4gICAgICBpZiAodGhpcy5hY2NlbGVyYXRpb25TdGFydFRpbWUgPj0gTUFYX0FDQ0VMRVJBVElPTl9USU1FKSB7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmN1cnJlbnRBY2NlbGVyYXRpb25UaW1lcilcclxuICAgICAgfVxyXG4gICAgfSwgNTApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBVbml0IH0gZnJvbSBcIi4vdW5pdFwiO1xyXG5pbXBvcnQgeyBnZXRDZW50ZXJDb29yZGluYXRlcywgaXNEaXN0YW5jZUJldHdlZW5Vbml0c01vcmVUaGFuU2FmZSB9IGZyb20gXCIuLi91dGlsc1wiO1xyXG5cclxuY29uc3QgU1BFRUQgPSAwLjY7XHJcbmV4cG9ydCBjb25zdCBCQVNFX1NNQVJUX1NJWkUgPSAxNjtcclxuY29uc3QgaW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNtYXJ0LWVuZW15LXNwcml0ZScpXHJcbmNvbnN0IE1FU1NBR0UgPSB7XHJcbiAgeDogMTAsXHJcbiAgeTogNSxcclxuICBmb250OiBcIjEzcHggQXJpYWxcIlxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU21hcnRFbmVteSBleHRlbmRzIFVuaXQge1xyXG4gIGNvbnN0cnVjdG9yKGN0eCwgd2lkdGgsIGhlaWdodCwgeCwgeSwgYWxmYVgsIGFsZmFZLCBzcGVlZCA9IFNQRUVEKSB7XHJcbiAgICBzdXBlcihjdHgsIHdpZHRoLCBoZWlnaHQsIHgsIHksIGFsZmFYLCBhbGZhWSwgc3BlZWQpO1xyXG4gICAgdGhpcy5zcHJpdGUgPSB7XHJcbiAgICAgIGJhc2VYOiAwLFxyXG4gICAgICBiYXNlWTogMCxcclxuICAgICAgeDogMCxcclxuICAgICAgeTogMCxcclxuICAgICAgd2lkdGg6IDE2LFxyXG4gICAgICBoZWlnaHQ6IDE2LFxyXG4gICAgICBkZWx0YVg6IDE2LFxyXG4gICAgICBkZWx0YVk6IDE2XHJcbiAgICB9XHJcblxyXG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5zcHJpdGUueCA8IDQ4KSB7XHJcbiAgICAgICAgdGhpcy5zcHJpdGUueCArPSB0aGlzLnNwcml0ZS5kZWx0YVhcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLnNwcml0ZS54ID0gdGhpcy5zcHJpdGUuYmFzZVg7XHJcbiAgICAgIH1cclxuICAgIH0sIDIwMClcclxuICB9XHJcblxyXG4gIG5ld1BvcyhoZXJvKSB7XHJcbiAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbihoZXJvKTtcclxuICAgIHN1cGVyLm5ld1BvcygpO1xyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoY3R4KSB7XHJcbiAgICBjb25zdCB7IHNwcml0ZSwgeCwgeSwgd2lkdGgsIGhlaWdodCB9ID0gdGhpc1xyXG4gICAgY3R4LmRyYXdJbWFnZShpbWcsIHNwcml0ZS54LCBzcHJpdGUueSwgc3ByaXRlLndpZHRoLCBzcHJpdGUuaGVpZ2h0LCB4LCB5LCB3aWR0aCwgaGVpZ2h0KVxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfVxyXG5cclxuICBzaG93V2FybmluZ01lc3NhZ2UodGV4dCkge1xyXG4gICAgdGhpcy5jdHguZm9udCA9IE1FU1NBR0UuZm9udDtcclxuICAgIHRoaXMuY3R4LnN0cm9rZVRleHQodGV4dCwgdGhpcy54ICsgTUVTU0FHRS54LCB0aGlzLnkgLSBNRVNTQUdFLnkpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlRGlyZWN0aW9uKGhlcm8pIHtcclxuICAgIGNvbnN0IGZlYXJQYXJhbXMgPSB0aGlzLmdldEZlYXJQYXJhbXMoaGVyby5pc0ltbW9ydGFsKTtcclxuICAgIGlmICghaXNEaXN0YW5jZUJldHdlZW5Vbml0c01vcmVUaGFuU2FmZShoZXJvLCB0aGlzLCBmZWFyUGFyYW1zLmRpc3RhbmNlKSkge1xyXG4gICAgICBjb25zdCBbaGVyb1gsIGhlcm9ZXSA9IGdldENlbnRlckNvb3JkaW5hdGVzKGhlcm8pO1xyXG4gICAgICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIoaGVyb1ggLSB0aGlzLnggLSB0aGlzLndpZHRoIC8gMiwgaGVyb1kgLSB0aGlzLnkgLSB0aGlzLmhlaWdodCAvIDIpICsgTWF0aC5QSTtcclxuICAgICAgdGhpcy5kaXIueSA9IGZlYXJQYXJhbXMuY29lZmZpY2llbnQgKiBNYXRoLmNvcyhhbmdsZSk7XHJcbiAgICAgIHRoaXMuZGlyLnggPSBmZWFyUGFyYW1zLmNvZWZmaWNpZW50ICogTWF0aC5zaW4oYW5nbGUpO1xyXG4gICAgICB0aGlzLnNob3dXYXJuaW5nTWVzc2FnZShmZWFyUGFyYW1zLm1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0RmVhclBhcmFtcyhpc0ZlYXIpIHtcclxuICAgIGlmIChpc0ZlYXIpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBkaXN0YW5jZTogMzAwLFxyXG4gICAgICAgIGNvZWZmaWNpZW50OiAxLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdZb3UgZG9uXFwndCBjYXRjaCBtZSEnXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgZGlzdGFuY2U6IDIwMCxcclxuICAgICAgICBjb2VmZmljaWVudDogLTEsXHJcbiAgICAgICAgbWVzc2FnZTogJ0kgc2VlIHlvdSdcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBtb3ZlVG9Bbm90aGVyU2lkZUlmR29CZXlvbmNlQ2FudmFzIH0gZnJvbSBcIi4uL2NvbnRyb2xzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVW5pdCB7XHJcbiAgY29uc3RydWN0b3IoY3R4LCB3aWR0aCwgaGVpZ2h0LCB4LCB5LCBhbGZhWCwgYWxmYVksIHNwZWVkKSB7XHJcbiAgICB0aGlzLmN0eCA9IGN0eDtcclxuICAgIHRoaXMud2lkdGggPSB3aWR0aDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgdGhpcy5zcGVlZCA9IHNwZWVkO1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLmRpciA9IHtcclxuICAgICAgeDogYWxmYVgsXHJcbiAgICAgIHk6IGFsZmFZXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgbmV3UG9zKCkge1xyXG4gICAgdGhpcy54ICs9IHRoaXMuc3BlZWQgKiB0aGlzLmRpci54O1xyXG4gICAgdGhpcy55ICs9IHRoaXMuc3BlZWQgKiB0aGlzLmRpci55O1xyXG4gICAgbW92ZVRvQW5vdGhlclNpZGVJZkdvQmV5b25jZUNhbnZhcyh0aGlzLmN0eCwgdGhpcyk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgSGVybyB9IGZyb20gXCIuL2NyZWF0dXJlcy9oZXJvXCI7XHJcbmltcG9ydCB7IER1bW15RW5lbXksIEJBU0VfRFVNTVlfU0laRSB9IGZyb20gXCIuL2NyZWF0dXJlcy9kdW1teUVuZW15XCI7XHJcbmltcG9ydCB7IFNtYXJ0RW5lbXksIEJBU0VfU01BUlRfU0laRSB9IGZyb20gXCIuL2NyZWF0dXJlcy9zbWFydEVuZW15XCI7XHJcbmltcG9ydCB7IGFkZEhlcm9Db250cm9scyB9IGZyb20gXCIuL2NvbnRyb2xzXCI7XHJcbmltcG9ydCB7IGlzRGlzdGFuY2VCZXR3ZWVuVW5pdHNNb3JlVGhhblNhZmUsIGlmVW5pdHNUb3VjaEVhY2hPdGhlciwgZ2V0Q2VudGVyQ29vcmRpbmF0ZXMsIG1lcmdlVW5pdHMgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBCdWxsZXQgfSBmcm9tIFwiLi9jcmVhdHVyZXMvYnVsbGV0XCI7XHJcbmltcG9ydCB7IEJ1ZmZJdGVtIH0gZnJvbSAnLi9idWZmcy9idWZmLWl0ZW0nO1xyXG5pbXBvcnQgeyBSYW5kb21CdWZmIH0gZnJvbSAnLi9idWZmcy9idWZmLWdlbmVyYXRvcic7XHJcblxyXG5jb25zdCBzY29yZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2NvcmVcIik7XHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZSB7XHJcbiAgY29uc3RydWN0b3IoY2FudmFzKSB7XHJcbiAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcclxuICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgIHRoaXMuY3VycmVudFRpbWUgPSBEYXRlLm5vdygpO1xyXG5cclxuICAgIHRoaXMuY2FudmFzLndpZHRoID0gNzAwO1xyXG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gNzAwO1xyXG4gICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICB0aGlzLmhlcm8gPSBuZXcgSGVybyh0aGlzLmN0eCk7XHJcbiAgICB0aGlzLmR1bW15RW5lbWllcyA9IFtdO1xyXG4gICAgdGhpcy5zbWFydEVuZW1pZXMgPSBbXTtcclxuICAgIHRoaXMuaGVyb0J1bGxldHMgPSBbXTtcclxuICAgIHRoaXMudGltZXJzID0gW107XHJcbiAgICB0aGlzLmJ1ZmZJdGVtID0gJyc7XHJcbiAgfVxyXG5cclxuICBzdGFydCgpIHtcclxuICAgIGNvbnN0IHRpbWVyMSA9IHNldEludGVydmFsKCgpID0+IHRoaXMudXBkYXRlR2FtZSgpLCAxMCk7XHJcbiAgICBjb25zdCB0aW1lcjIgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLmFkZEVuZW15KHRoaXMuZHVtbXlFbmVtaWVzLCBEdW1teUVuZW15LCBCQVNFX0RVTU1ZX1NJWkUpLCA0MDAwKTtcclxuICAgIGNvbnN0IHRpbWVyMyA9IHNldEludGVydmFsKCgpID0+IHRoaXMuYWRkRW5lbXkodGhpcy5zbWFydEVuZW1pZXMsIFNtYXJ0RW5lbXksIEJBU0VfU01BUlRfU0laRSksIDIwMDApO1xyXG4gICAgY29uc3QgdGltZXI0ID0gc2V0SW50ZXJ2YWwoKCkgPT4gdGhpcy5hZGRCdWZmSXRlbSgpLCAxMjAwMCk7XHJcbiAgICB0aGlzLnRpbWVycy5wdXNoKHRpbWVyMSwgdGltZXIyLCB0aW1lcjMsIHRpbWVyNCk7XHJcbiAgICBhZGRIZXJvQ29udHJvbHModGhpcy5oZXJvLCAoeCwgeSkgPT4gdGhpcy5hZGRCdWxsZXQoeCwgeSkpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlR2FtZSgpIHtcclxuICAgIHRoaXMudXBkYXRlU2NvcmUoKTtcclxuICAgIHRoaXMudXBkYXRlQ2FudmFzU3RhdGUoKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVNjb3JlKCkge1xyXG4gICAgdGhpcy5jdXJyZW50VGltZSA9IHRoaXMuY3VycmVudFRpbWUgKyAxMDtcclxuICAgIGNvbnN0IHZhbHVlID0gKHRoaXMuY3VycmVudFRpbWUgLSB0aGlzLnN0YXJ0VGltZSkgLyAxMDAwO1xyXG4gICAgc2NvcmUuaW5uZXJIVE1MID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVDYW52YXNTdGF0ZSgpIHtcclxuICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmN0eC5jYW52YXMuY2xpZW50V2lkdGgsIHRoaXMuY3R4LmNhbnZhcy5jbGllbnRIZWlnaHQpO1xyXG4gICAgdGhpcy5idWZmSXRlbSAmJiB0aGlzLmJ1ZmZJdGVtLmRyYXcodGhpcy5jdHgpO1xyXG4gICAgdGhpcy5oYW5kbGVIZXJvUG9zaXRpb24oKTtcclxuICAgIHRoaXMuaGFuZGxlRHVtbXlFbmVtaWVzUG9zaXRpb24oKTtcclxuICAgIHRoaXMuaGFuZGxlU21hcnRFbmVtaWVzUG9zaXRpb24oKTtcclxuICAgIHRoaXMuaGFuZGxlSGVyb0J1bGxldHNQb3NpdGlvbigpO1xyXG4gICAgdGhpcy5oYW5kbGVFbmVtaWVzRGVhdGgoKTtcclxuICAgIHRoaXMuaGFuZGxlSGVyb0RlYXRoKCk7XHJcbiAgICB0aGlzLmhhbmRsZUJ1ZmZzKCk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVIZXJvUG9zaXRpb24oKSB7XHJcbiAgICB0aGlzLmhlcm8ubmV3UG9zKCkudXBkYXRlKHRoaXMuY3R4KTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUR1bW15RW5lbWllc1Bvc2l0aW9uKCkge1xyXG4gICAgdGhpcy5kdW1teUVuZW1pZXMuZm9yRWFjaChlbmVteSA9PiBlbmVteS5uZXdQb3MoKS51cGRhdGUodGhpcy5jdHgpKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVNtYXJ0RW5lbWllc1Bvc2l0aW9uKCkge1xyXG4gICAgdGhpcy5zbWFydEVuZW1pZXMgPSB0aGlzLnNtYXJ0RW5lbWllcy5yZWR1Y2UoKG5ld0FycmF5LCBjdXJyZW50RW5lbXkpID0+IHtcclxuICAgICAgaWYgKG5ld0FycmF5LnNvbWUoZW5lbXkgPT4gaWZVbml0c1RvdWNoRWFjaE90aGVyKGVuZW15LCBjdXJyZW50RW5lbXkpKSkge1xyXG4gICAgICAgIHJldHVybiBuZXdBcnJheTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBzZWNvbmRFbmVteSA9IHRoaXMuc21hcnRFbmVtaWVzLmZpbmQoZW5lbXkgPT4gaWZVbml0c1RvdWNoRWFjaE90aGVyKGVuZW15LCBjdXJyZW50RW5lbXkpICYmIChlbmVteSAhPT0gY3VycmVudEVuZW15KSlcclxuICAgICAgaWYgKHNlY29uZEVuZW15KSB7XHJcbiAgICAgICAgY3VycmVudEVuZW15ID0gbWVyZ2VVbml0cyhjdXJyZW50RW5lbXksIHNlY29uZEVuZW15KVxyXG4gICAgICB9XHJcbiAgICAgIG5ld0FycmF5LnB1c2goY3VycmVudEVuZW15KTtcclxuICAgICAgcmV0dXJuIG5ld0FycmF5O1xyXG4gICAgfSwgW10pO1xyXG4gICAgdGhpcy5zbWFydEVuZW1pZXMuZm9yRWFjaChjdXJyZW50RW5lbXkgPT4gY3VycmVudEVuZW15Lm5ld1Bvcyh0aGlzLmhlcm8pLnVwZGF0ZSh0aGlzLmN0eCkpXHJcbiAgfVxyXG5cclxuICBoYW5kbGVIZXJvQnVsbGV0c1Bvc2l0aW9uKCkge1xyXG4gICAgbGV0IEZJRUxEX1dJRFRIID0gdGhpcy5jdHguY2FudmFzLmNsaWVudFdpZHRoO1xyXG4gICAgbGV0IEZJRUxEX0hFSUdIVCA9IHRoaXMuY3R4LmNhbnZhcy5jbGllbnRIZWlnaHQ7XHJcbiAgICBsZXQgaXNJbnNpZGVDYW52YXM7XHJcbiAgICB0aGlzLmhlcm9CdWxsZXRzID0gdGhpcy5oZXJvQnVsbGV0cy5maWx0ZXIoYnVsbGV0ID0+IHtcclxuICAgICAgaXNJbnNpZGVDYW52YXMgPSBidWxsZXQueCA8IEZJRUxEX1dJRFRIICYmIGJ1bGxldC54ID4gMCAmJiBidWxsZXQueSA8IEZJRUxEX0hFSUdIVCAmJiBidWxsZXQueSA+IDA7XHJcbiAgICAgIGlmIChpc0luc2lkZUNhbnZhcykge1xyXG4gICAgICAgIGJ1bGxldC5uZXdQb3MoKS51cGRhdGUodGhpcy5jdHgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBpc0luc2lkZUNhbnZhcztcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlRW5lbWllc0RlYXRoKCkge1xyXG4gICAgY29uc3QgbmV3U21hcnRFbmVtaWVzID0gW107XHJcbiAgICBjb25zdCBuZXdEdW1teUVuZW1pZXMgPSBbXTtcclxuICAgIGNvbnN0IG5ld0J1bGxldHMgPSBbXTtcclxuICAgIGNvbnN0IGFsbEVuZW1pZXMgPSBbLi4udGhpcy5zbWFydEVuZW1pZXMsIC4uLnRoaXMuZHVtbXlFbmVtaWVzXVxyXG5cclxuICAgIHRoaXMuc21hcnRFbmVtaWVzLmZvckVhY2goZW5lbXkgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuaGVyb0J1bGxldHMuc29tZShidWxsZXQgPT4gdGhpcy5zaG91bGRFbmVteURpZUlmQnVsbGV0SGl0c0hpbShlbmVteSwgYnVsbGV0KSkpIHtcclxuICAgICAgICBuZXdTbWFydEVuZW1pZXMucHVzaChlbmVteSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIHRoaXMuZHVtbXlFbmVtaWVzLmZvckVhY2goZW5lbXkgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuaGVyb0J1bGxldHMuc29tZShidWxsZXQgPT4gdGhpcy5zaG91bGRFbmVteURpZUlmQnVsbGV0SGl0c0hpbShlbmVteSwgYnVsbGV0KSkpIHtcclxuICAgICAgICBuZXdEdW1teUVuZW1pZXMucHVzaChlbmVteSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIHRoaXMuaGVyb0J1bGxldHMuZm9yRWFjaChidWxsZXQgPT4ge1xyXG4gICAgICBpZiAoIWFsbEVuZW1pZXMuc29tZShlbmVteSA9PiB0aGlzLnNob3VsZEVuZW15RGllSWZCdWxsZXRIaXRzSGltKGVuZW15LCBidWxsZXQpKSkge1xyXG4gICAgICAgIG5ld0J1bGxldHMucHVzaChidWxsZXQpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICB0aGlzLnNtYXJ0RW5lbWllcyA9IG5ld1NtYXJ0RW5lbWllcztcclxuICAgIHRoaXMuZHVtbXlFbmVtaWVzID0gbmV3RHVtbXlFbmVtaWVzO1xyXG4gICAgdGhpcy5oZXJvQnVsbGV0cyA9IG5ld0J1bGxldHM7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVIZXJvRGVhdGgoKSB7XHJcbiAgICBpZiAoIXRoaXMuaGVyby5pc0ltbW9ydGFsKSB7XHJcbiAgICAgIGNvbnN0IERFTFRBID0gNTtcclxuICAgICAgY29uc3QgZW5lbWllcyA9IFsuLi50aGlzLmR1bW15RW5lbWllcywgLi4udGhpcy5zbWFydEVuZW1pZXNdO1xyXG4gICAgICBpZiAoZW5lbWllcy5zb21lKGVuZW15ID0+IGlmVW5pdHNUb3VjaEVhY2hPdGhlcih0aGlzLmhlcm8sIGVuZW15LCBERUxUQSkpKSB7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnRpbWVycy5tYXAodGltZXIgPT4gY2xlYXJJbnRlcnZhbCh0aW1lcikpO1xyXG4gICAgICAgICAgYWxlcnQoXCJZb3UgbG9zZVwiKTtcclxuICAgICAgICB9LCA1KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlQnVmZnMoKSB7XHJcbiAgICBpZiAoaWZVbml0c1RvdWNoRWFjaE90aGVyKHRoaXMuaGVybywgdGhpcy5idWZmSXRlbSkpIHtcclxuICAgICAgY29uc3QgVElNRSA9IDIwMDAwO1xyXG4gICAgICB0aGlzLmJ1ZmZJdGVtLmFjdGl2YXRlQnVmZih0aGlzLCBUSU1FKTtcclxuICAgICAgdGhpcy5idWZmSXRlbSA9ICcnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzaG91bGRFbmVteURpZUlmQnVsbGV0SGl0c0hpbShlbmVteSwgYnVsbGV0KSB7XHJcbiAgICBjb25zdCBNSU5fU0laRSA9IDI1O1xyXG4gICAgY29uc3QgaXNDb250YWN0ID0gaWZVbml0c1RvdWNoRWFjaE90aGVyKGVuZW15LCBidWxsZXQpXHJcblxyXG4gICAgaWYgKGlzQ29udGFjdCkge1xyXG4gICAgICBlbmVteSA9IHRoaXMuZGFtYWdlVW5pdChlbmVteSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNDb250YWN0ICYmIChlbmVteS53aWR0aCA8IE1JTl9TSVpFIHx8IGVuZW15LmhlaWdodCA8IE1JTl9TSVpFKSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGFtYWdlVW5pdCh1bml0KSB7XHJcbiAgICBjb25zdCBEQU1BR0UgPSAyMDtcclxuICAgIGNvbnN0IFNQRUVEX0RFQ1JFQVNFID0gMC4xNTtcclxuICAgIGNvbnN0IHMgPSB1bml0LndpZHRoICogdW5pdC5oZWlnaHQ7XHJcbiAgICBjb25zdCBrID0gKHMgLSBEQU1BR0UpIC8gcztcclxuICAgIHVuaXQud2lkdGggKj0gaztcclxuICAgIHVuaXQuaGVpZ2h0ICo9IGs7XHJcbiAgICB1bml0LnNwZWVkID4gU1BFRURfREVDUkVBU0UgPyB1bml0LnNwZWVkIC09IFNQRUVEX0RFQ1JFQVNFIDogMDtcclxuICAgIHJldHVybiB1bml0O1xyXG4gIH1cclxuXHJcbiAgYWRkRW5lbXkoZW5lbXlBcnJheSwgY3JlYXR1cmVDb25zdHJ1Y3RvciwgYmFzZVNpemUpIHtcclxuICAgIGNvbnN0IHsgc2l6ZSwgeCwgeSwgYWxmYVgsIGFsZmFZIH0gPSB0aGlzLmdlbmVyYXRlUmFuZG9tUG9zaXRpb25BbmREaXJlY3Rpb24odGhpcy5oZXJvLCBiYXNlU2l6ZSk7XHJcbiAgICBjb25zdCBlbmVteSA9IG5ldyBjcmVhdHVyZUNvbnN0cnVjdG9yKHRoaXMuY3R4LCBzaXplLCBzaXplLCB4LCB5LCBhbGZhWCwgYWxmYVkpO1xyXG4gICAgZW5lbXlBcnJheS5wdXNoKGVuZW15KTtcclxuICB9XHJcblxyXG4gIGFkZEJ1bGxldCh4LCB5KSB7XHJcbiAgICBjb25zdCBbaGVyb1gsIGhlcm9ZXSA9IGdldENlbnRlckNvb3JkaW5hdGVzKHRoaXMuaGVybyk7XHJcbiAgICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIoaGVyb1ggLSB4LCBoZXJvWSAtIHkpICsgTWF0aC5QSTtcclxuICAgIGNvbnN0IGJ1bGxldCA9IG5ldyBCdWxsZXQodGhpcy5jdHgsIGhlcm9YLCBoZXJvWSwgTWF0aC5zaW4oYW5nbGUpLCBNYXRoLmNvcyhhbmdsZSkpO1xyXG4gICAgdGhpcy5oZXJvQnVsbGV0cy5wdXNoKGJ1bGxldCk7XHJcbiAgfVxyXG5cclxuICBhZGRCdWZmSXRlbSgpIHtcclxuICAgIGNvbnN0IHNpemUgPSAyMDtcclxuICAgIGNvbnN0IHsgeCwgeSB9ID0gdGhpcy5nZW5lcmF0ZVJhbmRvbVBvc2l0aW9uQW5kRGlyZWN0aW9uKHRoaXMuaGVybywgMCk7XHJcbiAgICBjb25zdCBidWZmSXRlbSA9IG5ldyBSYW5kb21CdWZmKHRoaXMuY3R4LCBzaXplLCBzaXplLCB4LCB5KTtcclxuICAgIHRoaXMuYnVmZkl0ZW0gPSBidWZmSXRlbTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlUmFuZG9tUG9zaXRpb25BbmREaXJlY3Rpb24oaGVybywgYmFzZVNpemUpIHtcclxuICAgIGxldCB4O1xyXG4gICAgbGV0IHk7XHJcbiAgICBjb25zdCBzaXplID0gTWF0aC5yYW5kb20oKSAqIDIwICsgYmFzZVNpemU7XHJcbiAgICBkbyB7XHJcbiAgICAgIHggPSBNYXRoLnJhbmRvbSgpICogdGhpcy5jdHguY2FudmFzLmNsaWVudFdpZHRoO1xyXG4gICAgICB5ID0gTWF0aC5yYW5kb20oKSAqIHRoaXMuY3R4LmNhbnZhcy5jbGllbnRIZWlnaHQ7XHJcbiAgICB9IHdoaWxlICghaXNEaXN0YW5jZUJldHdlZW5Vbml0c01vcmVUaGFuU2FmZShoZXJvLCB7IHgsIHksIHdpZHRoOiBzaXplLCBoZWlnaHQ6IHNpemUgfSkpO1xyXG5cclxuICAgIGNvbnN0IGFsZmFYID0gTWF0aC5yYW5kb20oKSAqIDIgLSAxO1xyXG4gICAgY29uc3QgYWxmYVkgPSBNYXRoLnJhbmRvbSgpICogMiAtIDE7XHJcblxyXG4gICAgcmV0dXJuIHsgeCwgeSwgYWxmYVgsIGFsZmFZLCBzaXplIH07XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEdhbWUgfSBmcm9tIFwiLi9nYW1lLWFyZW5hXCI7XHJcblxyXG5pbml0aWFsaXplR2FtZSgpO1xyXG5cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUdhbWUoKSB7XHJcbiAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImNhbnZhc1wiKTtcclxuXHJcbiAgY29uc3QgZ2FtZSA9IG5ldyBHYW1lKGNhbnZhcyk7XHJcbiAgZ2FtZS5zdGFydCgpO1xyXG59XHJcbiIsImV4cG9ydCBmdW5jdGlvbiBnZXRDZW50ZXJDb29yZGluYXRlcyh1bml0KSB7XHJcbiAgcmV0dXJuIFt1bml0LnggKyAwLjUgKiB1bml0LndpZHRoLCB1bml0LnkgKyAwLjUgKiB1bml0LmhlaWdodF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREaXN0YW5jZUJldHdlZW5Vbml0cyh1bml0MSwgdW5pdDIpIHtcclxuICBjb25zdCBbeDEsIHkxXSA9IGdldENlbnRlckNvb3JkaW5hdGVzKHVuaXQxKTtcclxuICBjb25zdCBbeDIsIHkyXSA9IGdldENlbnRlckNvb3JkaW5hdGVzKHVuaXQyKTtcclxuICByZXR1cm4gTWF0aC5wb3coTWF0aC5wb3coeDEgLSB4MiwgMikgKyBNYXRoLnBvdyh5MSAtIHkyLCAyKSwgMC41KTtcclxufVxyXG5cclxuY29uc3QgUElYRUxfQk9SREVSID0gMlxyXG5leHBvcnQgZnVuY3Rpb24gaWZVbml0c1RvdWNoRWFjaE90aGVyKHVuaXQxLCB1bml0MiwgZGVsdGEgPSAwKSB7XHJcbiAgY29uc3QgW3gxLCB5MV0gPSBnZXRDZW50ZXJDb29yZGluYXRlcyh1bml0MSk7XHJcbiAgY29uc3QgW3gyLCB5Ml0gPSBnZXRDZW50ZXJDb29yZGluYXRlcyh1bml0Mik7XHJcbiAgcmV0dXJuIChcclxuICAgIE1hdGguYWJzKHgyIC0geDEpIDwgKHVuaXQxLndpZHRoICsgdW5pdDIud2lkdGggLSBQSVhFTF9CT1JERVIgLSBkZWx0YSkgLyAyXHJcbiAgICAmJiBNYXRoLmFicyh5MiAtIHkxKSA8ICh1bml0MS5oZWlnaHQgKyB1bml0Mi5oZWlnaHQgLSBQSVhFTF9CT1JERVIgLSBkZWx0YSkgLyAyXHJcbiAgKTtcclxufVxyXG5cclxuY29uc3QgU0FGRV9ESVNUQU5DRSA9IDIwMDtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0Rpc3RhbmNlQmV0d2VlblVuaXRzTW9yZVRoYW5TYWZlKHVuaXQxLCB1bml0MiwgZGlzdCA9IFNBRkVfRElTVEFOQ0UpIHtcclxuICByZXR1cm4gZ2V0RGlzdGFuY2VCZXR3ZWVuVW5pdHModW5pdDEsIHVuaXQyKSA+IGRpc3Q7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZVVuaXRzKHVuaXQxLCB1bml0Mikge1xyXG4gIGNvbnN0IHMxID0gdW5pdDEud2lkdGggKiB1bml0MS5oZWlnaHQ7XHJcbiAgY29uc3QgczIgPSB1bml0Mi53aWR0aCAqIHVuaXQyLmhlaWdodFxyXG4gIGNvbnN0IGsgPSBNYXRoLnBvdygoczEgKyBzMikgLyBzMSwgMC41KVxyXG4gIHVuaXQxLndpZHRoICo9IGs7XHJcbiAgdW5pdDEuaGVpZ2h0ICo9IGs7XHJcbiAgcmV0dXJuIHVuaXQxO1xyXG59XHJcbiJdfQ==
